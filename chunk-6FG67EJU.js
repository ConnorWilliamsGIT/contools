import{a as H}from"./chunk-YGAGSPF3.js";import{a as v,b as E,c as y,d as _,e as w,f as x,g as l,h as g,i as C,j as m,m as r,n as d,o as h,p,q as L,r as b}from"./chunk-G5YMYTWS.js";var a=class{constructor(n,f){this.x=0,this.y=0,this.adjacentNodes=[],this.visited=!1,this.id=0,this.x=n,this.y=f}get isVisited(){return this.visited}get getId(){return this.id}setVisited(n){this.visited=n}setId(n){this.id=n}setCoordinate(n){this.x=n.x,this.y=n.y}addAdjacentNode(n){this.adjacentNodes.push(n)}removeAdjacentNode(n){this.adjacentNodes=this.adjacentNodes.filter(f=>f!==n)}isAdjacent(n){return this.adjacentNodes.includes(n)}};var S=["canvas"],N=["canvasFrame"],M=["image"],T=["deleteButton"],j=["resetButton"],A=(()=>{let n=class n{constructor(){this.buttonHovered=!1,this.nodeRadius=15,this.nodeList=[],this.graphList=x([]),this.graphString=w(()=>(console.log("updated graph string"),this.graphsToString(this.graphList()))),this.drawingEdge=!1,this.tempEdgeSource=new a(0,0),this.tempEdgeEnd=new a(0,0),this.Mode={DEFAULT:Symbol("default"),DELETE:Symbol("delete"),MOVE:Symbol("move")},this.current_mode=this.Mode.DEFAULT}isButtonHovered(e){this.buttonHovered=e}ngAfterViewInit(){if(this.canvas===void 0||this.canvasFrame===void 0){console.log("Canvas not found");return}this.ctx=this.canvas.nativeElement.getContext("2d"),this.resizeCanvas()}resizeCanvas(){if(this.canvas===void 0||this.canvasFrame===void 0){console.log("Canvas not found");return}let e=this.canvasFrame.nativeElement;this.ctx.canvas.width=e.clientWidth,this.ctx.canvas.height=e.clientHeight,this.updateCanvas()}renderImage(){let e=new Image;e.onload=()=>{let t=(this.ctx.canvas.width-e.width*.3)/2,i=(this.ctx.canvas.height-e.height*.3)/2;this.ctx.drawImage(e,t,i,e.width*.3,e.height*.3)},e.src="https://media.licdn.com/dms/image/D5603AQHNteNbj0wR1w/profile-displayphoto-shrink_800_800/0/1705715328463?e=1715212800&v=beta&t=wVcIyNOl3h_1b_FK7aloU_aWNC7fHl9UrdbQhSdj1XU"}pageToCanvasPos(e){return{x:e.x-this.canvasFrame?.nativeElement.offsetLeft,y:e.y-this.canvasFrame?.nativeElement.offsetTop}}drawNode(e,t="white"){this.ctx.beginPath(),this.ctx.arc(e.x,e.y,this.nodeRadius,0,2*Math.PI),this.ctx.closePath(),this.ctx.fillStyle=t,this.ctx.fill()}getNodeDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}drawSelectNode(e){let t=.4*Math.PI,i=this.nodeRadius*.2,s=this.nodeRadius*1.4,o=Math.atan2(this.tempEdgeEnd.y-e.y,this.tempEdgeEnd.x-e.x);this.getNodeDistance(e,this.tempEdgeEnd)<s&&(t=0);let c=o+t/2;this.ctx.beginPath(),this.ctx.arc(e.x,e.y,s,c,2*Math.PI-t+c,!1),this.ctx.arc(e.x,e.y,s-i,2*Math.PI-t+c,c,!0),this.ctx.closePath(),this.ctx.fillStyle="lightblue",this.ctx.fill()}drawEdge(e,t){this.ctx.lineWidth=4,this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(t.x,t.y),this.ctx.closePath(),this.ctx.strokeStyle="white",this.ctx.stroke()}updateCanvas(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.current_mode===this.Mode.DELETE&&(this.ctx.fillStyle="rgba(255, 0, 0, 0.1)",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)),this.graphList().forEach(e=>this.drawGraph(e)),this.drawingEdge&&this.drawSelectNode(this.tempEdgeSource)}drawGraph(e){e.nodes.forEach(t=>{this.drawNode(t),t.adjacentNodes.forEach(i=>this.drawEdge(t,i))})}checkSpace(e){for(let t=0;t<this.graphList().length;t++){let i=this.graphList()[t];for(let s=0;s<i.nodes.length;s++){let o=i.nodes[s];if(Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))<this.nodeRadius*2)return{occupied:!0,node:o}}}return{occupied:!1,node:new a(0,0)}}handleKeyboardEvent(e){let t=e.key;t==="r"&&this.resetGraphs(),t==="x"&&this.toggleDeleteMode()}resetGraphs(){this.nodeList=[],this.graphList.set([]),this.updateCanvas()}toggleDeleteMode(){this.current_mode===this.Mode.DELETE?(this.current_mode=this.Mode.DEFAULT,this.deleteButton?.nativeElement.classList.remove("btn-error")):(this.current_mode=this.Mode.DELETE,this.deleteButton?.nativeElement.classList.add("btn-error")),this.updateCanvas()}onMousemove(e){this.drawingEdge&&(this.updateCanvas(),this.tempEdgeEnd.setCoordinate(this.pageToCanvasPos({x:e.pageX,y:e.pageY})),this.drawEdge(this.tempEdgeSource,this.tempEdgeEnd))}onClick(e){let t=this.pageToCanvasPos({x:e.pageX,y:e.pageY});if(t.x<0||t.y<0||t.x>this.ctx.canvas.width||t.y>this.ctx.canvas.height||this.buttonHovered){this.drawingEdge=!1,this.updateCanvas();return}let i=this.checkSpace(t);this.current_mode===this.Mode.DELETE?i.occupied&&(this.nodeList=this.nodeList.filter(s=>s!==i.node),this.nodeList.forEach(s=>s.removeAdjacentNode(i.node)),this.createGraphs()):!i.occupied&&!this.drawingEdge?(this.nodeList.push(new a(t.x,t.y)),this.graphList.update(s=>[...s,{nodes:[this.nodeList[this.nodeList.length-1]]}])):i.occupied&&!this.drawingEdge?(this.drawingEdge=!0,this.tempEdgeSource=i.node,this.tempEdgeEnd.setCoordinate(t)):i.occupied&&this.drawingEdge?(this.drawingEdge=!1,i.node!=this.tempEdgeSource&&!this.tempEdgeSource.isAdjacent(i.node)&&(this.tempEdgeSource.addAdjacentNode(i.node),i.node.addAdjacentNode(this.tempEdgeSource),this.createGraphs())):!i.occupied&&this.drawingEdge&&(this.drawingEdge=!1),this.updateCanvas()}createGraphs(){this.nodeList.forEach(e=>e.visited=!1),this.graphList.set([]);for(let e=0;e<this.nodeList.length;e++){let t=this.nodeList[e];if(!t.visited){let i={nodes:[]};this.graphList().push(i),this.visitNode(t,i)}}console.log(this.graphList())}graphsToString(e){let t="";for(let i=0;i<e.length;i++)t+="Graph "+(i+1)+`
`,t+=this.graphToString(e[i]),t+=`

`;return t}graphToString(e){let t="";for(let i=0;i<e.nodes.length;i++){t+=e.nodes[i].id,t+=" -> ";for(let s=0;s<e.nodes[i].adjacentNodes.length;s++)t+=e.nodes[i].adjacentNodes[s].id,t+=" ";t+=`
`}return t+=`
`,t}visitNode(e,t,i=0){if(!e.visited){t.nodes.push(e),e.setId(i),e.visited=!0;for(let s=0;s<e.adjacentNodes.length;s++)this.visitNode(e.adjacentNodes[s],t,++i)}}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v({type:n,selectors:[["app-home"]],viewQuery:function(t,i){if(t&1&&(r(S,5),r(N,5),r(M,5),r(T,5),r(j,5)),t&2){let s;d(s=h())&&(i.canvas=s.first),d(s=h())&&(i.canvasFrame=s.first),d(s=h())&&(i.image=s.first),d(s=h())&&(i.deleteButton=s.first),d(s=h())&&(i.resetButton=s.first)}},hostBindings:function(t,i){t&1&&m("resize",function(){return i.resizeCanvas()},!1,E)("keypress",function(o){return i.handleKeyboardEvent(o)},!1,y)("mousemove",function(o){return i.onMousemove(o)})("click",function(o){return i.onClick(o)})},standalone:!0,features:[b],decls:15,vars:1,consts:[["settings","",2,"user-select","none"],[1,"whitespace-pre-wrap"],["canvas","",1,"w-full","h-full","relative"],["canvasFrame",""],["canvas",""],["canvas_overlay","",1,"absolute","bottom-5","left-5","space-x-2","items-start"],["tabindex","-1",1,"btn","btn-square","btn-outline",3,"click","mouseout","mouseover"],["deleteButton",""],["resetButton",""]],template:function(t,i){t&1&&(l(0,"app-layout")(1,"div",0)(2,"div",1),p(3),g()(),l(4,"div",2,3),C(6,"canvas",null,4),l(8,"div",5)(9,"button",6,7),m("click",function(){return i.toggleDeleteMode()})("mouseout",function(){return i.isButtonHovered(!1)})("mouseover",function(){return i.isButtonHovered(!0)}),p(11," Delete X "),g(),l(12,"button",6,8),m("click",function(){return i.resetGraphs()})("mouseout",function(){return i.isButtonHovered(!1)})("mouseover",function(){return i.isButtonHovered(!0)}),p(14," Reset R "),g()()()()),t&2&&(_(3),L(" ",i.graphString()," "))},dependencies:[H]});let u=n;return u})();export{A as HomeComponent};

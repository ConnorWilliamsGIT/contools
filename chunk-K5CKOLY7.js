import{a as L}from"./chunk-3N4Q3VGY.js";import{a as m,b as v,c as x,d as w,e as E,f as r,g as c,h as y,i as C,l as g,m as l,n as u,o as f,p as S,q as N}from"./chunk-PJRE2CP6.js";var h=class{constructor(a,p){this.x=0,this.y=0,this.adjacentNodes=[],this.visited=!1,this.x=a,this.y=p}get isVisited(){return this.visited}setCoordinate(a){this.x=a.x,this.y=a.y}addAdjacentNode(a){this.adjacentNodes.push(a)}removeAdjacentNode(a){this.adjacentNodes=this.adjacentNodes.filter(p=>p!==a)}isAdjacent(a){return this.adjacentNodes.includes(a)}};var j=["canvas"],H=["canvasFrame"],_=["image"],b=(()=>{let a=class a{constructor(){this.nodeRadius=15,this.nodeList=[],this.graphList=E([]),this.graphString=w(()=>(console.log("updated graph string"),this.graphsToString(this.graphList()))),this.drawingEdge=!1,this.tempEdgeSource=new h(0,0),this.tempEdgeEnd=new h(0,0)}ngAfterViewInit(){if(this.canvas===void 0||this.canvasFrame===void 0){console.log("Canvas not found");return}this.ctx=this.canvas.nativeElement.getContext("2d"),this.resizeCanvas()}resizeCanvas(){if(this.canvas===void 0||this.canvasFrame===void 0){console.log("Canvas not found");return}let t=this.canvasFrame.nativeElement;this.ctx.canvas.width=t.clientWidth,this.ctx.canvas.height=t.clientHeight,this.updateCanvas()}renderImage(){let t=new Image;t.onload=()=>{let e=(this.ctx.canvas.width-t.width*.3)/2,i=(this.ctx.canvas.height-t.height*.3)/2;this.ctx.drawImage(t,e,i,t.width*.3,t.height*.3)},t.src="https://media.licdn.com/dms/image/D5603AQHNteNbj0wR1w/profile-displayphoto-shrink_800_800/0/1705715328463?e=1715212800&v=beta&t=wVcIyNOl3h_1b_FK7aloU_aWNC7fHl9UrdbQhSdj1XU"}pageToCanvasPos(t){return{x:t.x-this.canvas?.nativeElement.offsetLeft,y:t.y-this.canvas?.nativeElement.offsetTop}}drawNode(t,e="white"){this.ctx.beginPath(),this.ctx.arc(t.x,t.y,this.nodeRadius,0,2*Math.PI),this.ctx.closePath(),this.ctx.fillStyle=e,this.ctx.fill()}getNodeDistance(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}drawSelectNode(t){let e=.4*Math.PI,i=this.nodeRadius*.2,s=this.nodeRadius*1.4,n=Math.atan2(this.tempEdgeEnd.y-t.y,this.tempEdgeEnd.x-t.x);this.getNodeDistance(t,this.tempEdgeEnd)<s&&(e=0);let o=n+e/2;this.ctx.beginPath(),this.ctx.arc(t.x,t.y,s,o,2*Math.PI-e+o,!1),this.ctx.arc(t.x,t.y,s-i,2*Math.PI-e+o,o,!0),this.ctx.closePath(),this.ctx.fillStyle="lightblue",this.ctx.fill()}drawEdge(t,e){this.ctx.lineWidth=4,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y),this.ctx.closePath(),this.ctx.strokeStyle="white",this.ctx.stroke()}updateCanvas(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.graphList().forEach(t=>this.drawGraph(t)),this.drawingEdge&&this.drawSelectNode(this.tempEdgeSource)}drawGraph(t){t.nodes.forEach(e=>{this.drawNode(e),e.adjacentNodes.forEach(i=>this.drawEdge(e,i))})}checkSpace(t){for(let e=0;e<this.graphList().length;e++){let i=this.graphList()[e];for(let s=0;s<i.nodes.length;s++){let n=i.nodes[s];if(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))<this.nodeRadius*2)return{occupied:!0,node:n}}}return{occupied:!1,node:new h(0,0)}}onMousemove(t){this.drawingEdge&&(this.updateCanvas(),this.tempEdgeEnd.setCoordinate(this.pageToCanvasPos({x:t.pageX,y:t.pageY})),this.drawEdge(this.tempEdgeSource,this.tempEdgeEnd))}onClick(t){let e=this.pageToCanvasPos({x:t.pageX,y:t.pageY});if(e.x<0||e.y<0||e.x>this.ctx.canvas.width||e.y>this.ctx.canvas.height){this.drawingEdge=!1,this.updateCanvas();return}let i=this.checkSpace(e);!i.occupied&&!this.drawingEdge?(this.nodeList.push(new h(e.x,e.y)),this.graphList.update(s=>[...s,{nodes:[this.nodeList[this.nodeList.length-1]]}])):i.occupied&&!this.drawingEdge?(this.drawingEdge=!0,this.tempEdgeSource=i.node):i.occupied&&this.drawingEdge?(this.drawingEdge=!1,i.node!=this.tempEdgeSource&&!this.tempEdgeSource.isAdjacent(i.node)&&(this.tempEdgeSource.addAdjacentNode(i.node),i.node.addAdjacentNode(this.tempEdgeSource),this.createGraphs())):!i.occupied&&this.drawingEdge&&(this.drawingEdge=!1),this.updateCanvas()}createGraphs(){this.nodeList.forEach(t=>t.visited=!1),this.graphList.set([]);for(let t=0;t<this.nodeList.length;t++){let e=this.nodeList[t];if(!e.visited){let i={nodes:[]};this.graphList().push(i),this.visitNode(e,i)}}console.log(this.graphList())}graphsToString(t){let e="";for(let i=0;i<t.length;i++)e+=this.graphToString(t[i]);return e}graphToString(t){return String(t.nodes.length)}visitNode(t,e){if(!t.visited){e.nodes.push(t),t.visited=!0;for(let i=0;i<t.adjacentNodes.length;i++)this.visitNode(t.adjacentNodes[i],e)}}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=m({type:a,selectors:[["app-home"]],viewQuery:function(e,i){if(e&1&&(g(j,5),g(H,5),g(_,5)),e&2){let s;l(s=u())&&(i.canvas=s.first),l(s=u())&&(i.canvasFrame=s.first),l(s=u())&&(i.image=s.first)}},hostBindings:function(e,i){e&1&&C("resize",function(){return i.resizeCanvas()},!1,v)("mousemove",function(n){return i.onMousemove(n)})("click",function(n){return i.onClick(n)})},standalone:!0,features:[N],decls:10,vars:1,consts:[["settings","",2,"user-select","none"],["canvas","",1,"w-full","h-full"],["canvasFrame",""],["canvas",""]],template:function(e,i){e&1&&(r(0,"app-layout")(1,"div",0)(2,"h1"),f(3,"Your Graph"),c(),r(4,"div"),f(5),c()(),r(6,"div",1,2),y(8,"canvas",null,3),c()()),e&2&&(x(5),S(" ",i.graphString()," "))},dependencies:[L]});let d=a;return d})();export{b as HomeComponent};

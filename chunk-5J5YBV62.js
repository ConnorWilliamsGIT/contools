import{Da as S,Fa as _,Ga as D,Ha as $,Ia as j,Ja as N,Ka as u,La as r,Ma as h,Na as R,Oa as T,P as E,Ra as z,Wa as m,Xa as L,Ya as M,c as k,la as I,lb as O,qa as c,va as P}from"./chunk-FZ62MYCG.js";function A(i,o){if(i&1&&(u(0,"div")(1,"p",6),m(2," Note: Anvil image should look something like this."),h(3,"br"),m(4," Don't include the UI border or anything else in the screenshot. "),r(),h(5,"img",7),r()),i&2){let g=T();c(5),_("src",g.exampleImg,I)}}function B(i,o){i&1&&m(0," \u2192 ")}function W(i,o){if(i&1&&(h(0,"img",15),S(1,B,1,0)),i&2){let g=o.$implicit,n=o.$index,t=o.$count;z("src","assets/img/",g,".png",I),c(),D(1,n!==t-1?1:-1)}}function G(i,o){if(i&1&&(u(0,"div",8)(1,"div",9),h(2,"img",10),r(),h(3,"div",11),u(4,"div",12)(5,"p",13),m(6),h(7,"br"),m(8," Moves: "),r(),u(9,"div",14),j(10,W,2,2,null,null,$),r()()()),i&2){let g=T();c(2),_("src",g.imageUrl,I),c(4),L(" Steps: ",g.forgeText().length,""),c(4),N(g.forgeText())}}var Z=(()=>{let o=class o{constructor(){this.imageUrl="",this.exampleImg="../../../assets/img/exampleForge.png",this.forgeText=P([])}pasteImage(){return k(this,null,function*(){let n=yield navigator.clipboard.read();for(let t of n){if(!t.types.includes("image/png")){console.log("Clipboard item is not an image");continue}let e=yield t.getType("image/png");this.imageUrl=URL.createObjectURL(e),this.processImage()}})}processImage(){let n=document.createElement("canvas"),t=n.getContext("2d"),e=new Image;e.onload=()=>{if(t===null){console.log("Context is null");return}n.width=e.width,n.height=e.height,t.drawImage(e,0,0,n.width,n.height);let s=t.getImageData(0,0,e.width,e.height),x=0,d=!1,p=0,f=0;for(let l=0;l<e.height;l++){for(let a=0;a<e.width;a++){let y=this.getPixel(s,l*e.width+a);if(y[0]==63&&y[1]==63&&y[2]==63)x+=1,d||(d=!0,p=l,f=a);else if(d)break}if(d)break}console.log("count: "+x);let v=x/3;f-=v,console.log("aRow: "+p),console.log("aCol: "+f);let w=!1,b=0,H=!1,C=0,U=96;for(let l=0;l<e.width;l++){let a=this.getPixel(s,(U*v+p)*e.width+l);if(a[0]==0&&a[1]==255&&a[2]==6&&(U=90,b=l),a[0]==255&&a[1]==0&&a[2]==0){C=l;break}}console.log("greenCol: "+b),console.log("redCol: "+C);let F=(C-b)/v;console.log("distance: "+F);let[J,q]=this.minStepsToN(F);this.forgeText.set(q.map(l=>l.toString())),t.putImageData(s,0,0),console.log("updated image"),this.imageUrl=n.toDataURL()},e.src=this.imageUrl}getPixel(n,t){return n.data.subarray(t*4,t*4+4)}setPixel(n,t,e){n.data.set(e,t*4)}minStepsToN(n){let t=[-15,-9,-6,-3,2,7,13,16],e=150,s=[{sum:0,steps:0,path:[]}],x=new Set([0]);for(;s.length>0;){let{sum:d,steps:p,path:f}=s.shift();if(d===n)return console.log(`Steps: ${p}`),console.log(`Path: ${f.join(" \u2192 ")}`),[p,f];for(let v of t){let w=d+v;w>e||x.has(w)||(s.push({sum:w,steps:p+1,path:[...f,v]}),x.add(w))}}return console.log("No solution found."),[-1,[]]}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=E({type:o,selectors:[["app-forge"]],standalone:!0,features:[M],decls:8,vars:2,consts:[[1,"text-center","content-center","justify-center","h-svh","max-h-svh","items-center","flex","flex-col"],[1,"text-3xl","flex-none","font-bold","p-3","text-center","w-100","text-secondary"],[1,"text-center","content-center","justify-center","items-center","flex-1","flex","flex-col","w-[100%]"],[1,"btn","btn-primary","grow-0",3,"click"],[4,"ngIf"],["class","flex w-[90%] items-start mt-10 gap-3 max-h-[700px]",4,"ngIf"],[1,"text-neutral-content"],["alt","Example Image",3,"src"],[1,"flex","w-[90%]","items-start","mt-10","gap-3","max-h-[700px]"],[1,"outline","outline-base-content/50","rounded","rounded-4","grid","flex-none"],["alt","Pasted Image",3,"src"],[1,"inline-block","h-auto","min-h-[1em]","w-0.5","self-stretch","bg-base","dark:bg-white/10"],[1,"flex-1","max-h-[700px]","overflow-y-auto"],[1,"text-neutral-content","whitespace-normal"],[1,"flex","gap-1","items-center","justify-center","mt-5","flex-wrap"],["alt","Pasted Image",1,"w-10",3,"src"]],template:function(t,e){t&1&&(u(0,"div",0)(1,"h1",1),m(2,"Contools"),r(),u(3,"div",2)(4,"button",3),R("click",function(){return e.pasteImage()}),m(5,"Paste Image from clipboard"),r(),S(6,A,6,1,"div",4)(7,G,12,2,"div",5),r()()),t&2&&(c(6),_("ngIf",e.imageUrl==""),c(),_("ngIf",e.imageUrl!=""))},dependencies:[O]});let i=o;return i})();export{Z as ForgeComponent};
